<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 A working example | Creating swimmer plots with ease</title>
  <meta name="description" content="2 A working example | Creating swimmer plots with ease" />
  <meta name="generator" content="bookdown 0.36 and GitBook 2.6.7" />

  <meta property="og:title" content="2 A working example | Creating swimmer plots with ease" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 A working example | Creating swimmer plots with ease" />
  
  
  

<meta name="author" content="Jessica Weiss" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="more-complex-data-structures.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li> &nbsp;&nbsp; BiostatsUHNplus    </li>
<li> &nbsp;&nbsp; PMH Biostatistics</li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction to swimmers plots</a></li>
<li class="chapter" data-level="2" data-path="a-working-example.html"><a href="a-working-example.html"><i class="fa fa-check"></i><b>2</b> A working example</a>
<ul>
<li class="chapter" data-level="2.1" data-path="a-working-example.html"><a href="a-working-example.html#the-data-and-research-question"><i class="fa fa-check"></i><b>2.1</b> The Data and research question</a></li>
<li class="chapter" data-level="2.2" data-path="a-working-example.html"><a href="a-working-example.html#basic-plot"><i class="fa fa-check"></i><b>2.2</b> Basic plot</a></li>
<li class="chapter" data-level="2.3" data-path="a-working-example.html"><a href="a-working-example.html#modifying-the-order-and-colours-of-the-bars"><i class="fa fa-check"></i><b>2.3</b> Modifying the order and colours of the bars</a></li>
<li class="chapter" data-level="2.4" data-path="a-working-example.html"><a href="a-working-example.html#stratification"><i class="fa fa-check"></i><b>2.4</b> Stratification</a></li>
<li class="chapter" data-level="2.5" data-path="a-working-example.html"><a href="a-working-example.html#adding-points"><i class="fa fa-check"></i><b>2.5</b> Adding points</a></li>
<li class="chapter" data-level="2.6" data-path="a-working-example.html"><a href="a-working-example.html#adding-lines"><i class="fa fa-check"></i><b>2.6</b> Adding lines</a></li>
<li class="chapter" data-level="2.7" data-path="a-working-example.html"><a href="a-working-example.html#adding-lines-and-points-together"><i class="fa fa-check"></i><b>2.7</b> Adding lines and points together</a></li>
<li class="chapter" data-level="2.8" data-path="a-working-example.html"><a href="a-working-example.html#adding-arrows"><i class="fa fa-check"></i><b>2.8</b> Adding arrows</a></li>
<li class="chapter" data-level="2.9" data-path="a-working-example.html"><a href="a-working-example.html#making-the-plots-more-aesthetically-pleasing-with-ggplot-manipulations"><i class="fa fa-check"></i><b>2.9</b> Making the plots more aesthetically pleasing with ggplot manipulations</a>
<ul>
<li class="chapter" data-level="2.9.1" data-path="a-working-example.html"><a href="a-working-example.html#modifying-colours-and-shapes"><i class="fa fa-check"></i><b>2.9.1</b> Modifying Colours and shapes</a></li>
<li class="chapter" data-level="2.9.2" data-path="a-working-example.html"><a href="a-working-example.html#legends"><i class="fa fa-check"></i><b>2.9.2</b> Legends</a></li>
<li class="chapter" data-level="2.9.3" data-path="a-working-example.html"><a href="a-working-example.html#add-arrows-to-the-legend"><i class="fa fa-check"></i><b>2.9.3</b> Add arrows to the legend</a></li>
<li class="chapter" data-level="2.9.4" data-path="a-working-example.html"><a href="a-working-example.html#axis"><i class="fa fa-check"></i><b>2.9.4</b> axis</a></li>
<li class="chapter" data-level="2.9.5" data-path="a-working-example.html"><a href="a-working-example.html#formatting-the-legend-when-an-aesthetic-is-mapped-in-multiple-layers"><i class="fa fa-check"></i><b>2.9.5</b> Formatting the legend when an aesthetic is mapped in multiple layers</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="more-complex-data-structures.html"><a href="more-complex-data-structures.html"><i class="fa fa-check"></i><b>3</b> More complex data structures</a>
<ul>
<li class="chapter" data-level="3.1" data-path="more-complex-data-structures.html"><a href="more-complex-data-structures.html#gaps-between-sections-in-a-single-bar"><i class="fa fa-check"></i><b>3.1</b> Gaps between sections in a single bar</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="formatting-data.html"><a href="formatting-data.html"><i class="fa fa-check"></i><b>4</b> Formatting data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="formatting-data.html"><a href="formatting-data.html#long-data"><i class="fa fa-check"></i><b>4.1</b> Long data</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="when-there-is-one-column-per-event-type.html"><a href="when-there-is-one-column-per-event-type.html"><i class="fa fa-check"></i><b>5</b> When there is one column per event type</a></li>
<li class="chapter" data-level="6" data-path="when-there-are-multiple-column-per-event-type.html"><a href="when-there-are-multiple-column-per-event-type.html"><i class="fa fa-check"></i><b>6</b> When there are multiple column per event type</a></li>
<li class="chapter" data-level="7" data-path="swimplot.html"><a href="swimplot.html"><i class="fa fa-check"></i><b>7</b> swimplot</a>
<ul>
<li class="chapter" data-level="7.1" data-path="swimplot.html"><a href="swimplot.html#installation"><i class="fa fa-check"></i><b>7.1</b> Installation</a></li>
<li class="chapter" data-level="7.2" data-path="swimplot.html"><a href="swimplot.html#documentation"><i class="fa fa-check"></i><b>7.2</b> Documentation</a></li>
<li class="chapter" data-level="7.3" data-path="swimplot.html"><a href="swimplot.html#examples"><i class="fa fa-check"></i><b>7.3</b> Examples</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="swimplot.html"><a href="swimplot.html#swimmer-plot-that-includes-ae-event-status-by-course-cycle"><i class="fa fa-check"></i><b>7.3.1</b> Swimmer plot that includes AE event status by course cycle</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Creating swimmer plots with ease</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="a-working-example" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">2</span> A working example<a href="a-working-example.html#a-working-example" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="the-data-and-research-question" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> The Data and research question<a href="a-working-example.html#the-data-and-research-question" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>This is a clinical trial of 36 patients in which patients are randomized to one of two treatment arms, at 5 months patients are intended to switch arms, for each patient the adverse events and response information is recorded. The data is stored in three dataframes, <code>ClinicalTrial.Arm</code>, <code>ClinicalTrial.AE</code>, and <code>ClinicalTrial.Response</code></li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="a-working-example.html#cb2-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(ClinicalTrial.Arm,<span class="dv">10</span>))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="left">Arm</th>
<th align="right">End_trt</th>
<th align="right">Continued_treatment</th>
<th align="left">Sex</th>
<th align="left">Age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">Arm A</td>
<td align="right">3.26</td>
<td align="right">NA</td>
<td align="left">F</td>
<td align="left">&gt;=65</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Arm A</td>
<td align="right">2.00</td>
<td align="right">NA</td>
<td align="left">F</td>
<td align="left">&lt;65</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">Off Treatment</td>
<td align="right">10.00</td>
<td align="right">NA</td>
<td align="left">F</td>
<td align="left">&lt;65</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Arm A</td>
<td align="right">15.45</td>
<td align="right">NA</td>
<td align="left">F</td>
<td align="left">&lt;65</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">Arm B</td>
<td align="right">5.00</td>
<td align="right">NA</td>
<td align="left">F</td>
<td align="left">&gt;=65</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">Arm A</td>
<td align="right">14.84</td>
<td align="right">NA</td>
<td align="left">F</td>
<td align="left">&gt;=65</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="left">Arm B</td>
<td align="right">3.51</td>
<td align="right">NA</td>
<td align="left">F</td>
<td align="left">&lt;65</td>
</tr>
<tr class="even">
<td align="right">5</td>
<td align="left">Arm B</td>
<td align="right">6.00</td>
<td align="right">NA</td>
<td align="left">F</td>
<td align="left">&gt;=65</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">Arm A</td>
<td align="right">7.44</td>
<td align="right">NA</td>
<td align="left">F</td>
<td align="left">&gt;=65</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="left">Arm B</td>
<td align="right">3.70</td>
<td align="right">NA</td>
<td align="left">F</td>
<td align="left">&lt;65</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="a-working-example.html#cb3-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(ClinicalTrial.AE,<span class="dv">10</span>))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">time</th>
<th align="left">event</th>
<th align="left">Related</th>
<th align="left">Sex</th>
<th align="left">Age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">33</td>
<td align="right">2.20</td>
<td align="left">AE</td>
<td align="left">Likely</td>
<td align="left">M</td>
<td align="left">&gt;=65</td>
</tr>
<tr class="even">
<td align="right">14</td>
<td align="right">1.00</td>
<td align="left">SAE</td>
<td align="left">Possibly</td>
<td align="left">F</td>
<td align="left">&lt;65</td>
</tr>
<tr class="odd">
<td align="right">14</td>
<td align="right">3.67</td>
<td align="left">Death</td>
<td align="left">Not Likely</td>
<td align="left">F</td>
<td align="left">&lt;65</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="right">14.58</td>
<td align="left">AE</td>
<td align="left">Likely</td>
<td align="left">F</td>
<td align="left">&gt;=65</td>
</tr>
<tr class="odd">
<td align="right">29</td>
<td align="right">5.44</td>
<td align="left">SAE</td>
<td align="left">Possibly</td>
<td align="left">M</td>
<td align="left">&gt;=65</td>
</tr>
<tr class="even">
<td align="right">21</td>
<td align="right">0.50</td>
<td align="left">AE</td>
<td align="left">Possibly</td>
<td align="left">M</td>
<td align="left">&gt;=65</td>
</tr>
<tr class="odd">
<td align="right">10</td>
<td align="right">5.00</td>
<td align="left">SAE</td>
<td align="left">Not Likely</td>
<td align="left">F</td>
<td align="left">&lt;65</td>
</tr>
<tr class="even">
<td align="right">10</td>
<td align="right">6.06</td>
<td align="left">SAE</td>
<td align="left">Possibly</td>
<td align="left">F</td>
<td align="left">&lt;65</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">2.00</td>
<td align="left">SAE</td>
<td align="left">Not Likely</td>
<td align="left">F</td>
<td align="left">&lt;65</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="right">14.84</td>
<td align="left">Death</td>
<td align="left">Likely</td>
<td align="left">F</td>
<td align="left">&gt;=65</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="a-working-example.html#cb4-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(ClinicalTrial.Response,<span class="dv">10</span>))</span></code></pre></div>
<table>
<colgroup>
<col width="4%" />
<col width="22%" />
<col width="19%" />
<col width="13%" />
<col width="27%" />
<col width="5%" />
<col width="7%" />
</colgroup>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">Response_start</th>
<th align="right">Response_end</th>
<th align="left">Response</th>
<th align="right">Continued_response</th>
<th align="left">Sex</th>
<th align="left">Age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">10</td>
<td align="right">3.74</td>
<td align="right">6.02</td>
<td align="left">CR</td>
<td align="right">NA</td>
<td align="left">F</td>
<td align="left">&lt;65</td>
</tr>
<tr class="even">
<td align="right">11</td>
<td align="right">1.48</td>
<td align="right">2.21</td>
<td align="left">PR</td>
<td align="right">NA</td>
<td align="left">F</td>
<td align="left">&gt;=65</td>
</tr>
<tr class="odd">
<td align="right">12</td>
<td align="right">0.20</td>
<td align="right">0.67</td>
<td align="left">CR</td>
<td align="right">NA</td>
<td align="left">F</td>
<td align="left">&lt;65</td>
</tr>
<tr class="even">
<td align="right">13</td>
<td align="right">2.07</td>
<td align="right">2.59</td>
<td align="left">CR</td>
<td align="right">NA</td>
<td align="left">F</td>
<td align="left">&gt;=65</td>
</tr>
<tr class="odd">
<td align="right">15</td>
<td align="right">0.35</td>
<td align="right">4.05</td>
<td align="left">PR</td>
<td align="right">NA</td>
<td align="left">M</td>
<td align="left">&gt;=65</td>
</tr>
<tr class="even">
<td align="right">16</td>
<td align="right">4.49</td>
<td align="right">7.30</td>
<td align="left">CR</td>
<td align="right">NA</td>
<td align="left">M</td>
<td align="left">&lt;65</td>
</tr>
<tr class="odd">
<td align="right">17</td>
<td align="right">1.09</td>
<td align="right">1.44</td>
<td align="left">PR</td>
<td align="right">NA</td>
<td align="left">M</td>
<td align="left">&gt;=65</td>
</tr>
<tr class="even">
<td align="right">18</td>
<td align="right">0.55</td>
<td align="right">1.32</td>
<td align="left">CR</td>
<td align="right">NA</td>
<td align="left">M</td>
<td align="left">&lt;65</td>
</tr>
<tr class="odd">
<td align="right">19</td>
<td align="right">0.00</td>
<td align="right">0.96</td>
<td align="left">PR</td>
<td align="right">1</td>
<td align="left">M</td>
<td align="left">&gt;=65</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">3.36</td>
<td align="right">8.77</td>
<td align="left">PR</td>
<td align="right">NA</td>
<td align="left">F</td>
<td align="left">&lt;65</td>
</tr>
</tbody>
</table>
</div>
<div id="basic-plot" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Basic plot<a href="a-working-example.html#basic-plot" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>The <code>swimmer_plot()</code> function creates the base of the swimmer plot</li>
<li>The required arguments are a dataframe, an id column name, and the column name of where the bars end</li>
<li>You have the option to add the start time for each bar if there are gaps between sections of bars, or if some bars begin prior to time zero</li>
<li>By default the bars are in increasing order, but any order can be specified</li>
<li>A column name for the fill, transparency and colour (outline of the bars) can also be included</li>
<li>Individual bars can change colour/transparency over time</li>
<li>Other aesthetics can be manipulated using <code>geom_bar()</code> arguments (eg. fill,width, alpha)</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="a-working-example.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">swimmer_plot</span>(<span class="at">df=</span>ClinicalTrial.Arm,<span class="at">id=</span><span class="st">&#39;id&#39;</span>,<span class="at">end=</span><span class="st">&#39;End_trt&#39;</span>,<span class="at">fill=</span><span class="st">&#39;lightblue&#39;</span>,<span class="at">width=</span>.<span class="dv">85</span>)</span></code></pre></div>
<p><img src="man/figures/unnamed-chunk-3-1.png" width="672" /></p>
</div>
<div id="modifying-the-order-and-colours-of-the-bars" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Modifying the order and colours of the bars<a href="a-working-example.html#modifying-the-order-and-colours-of-the-bars" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <code>swimmer_plot()</code> function includes the option for a bar to change colours. Each section of the bars should be in a different row, where each row includes the time that section ends. By default the bars are plotted in increasing order, a column name can be used in the argument id_order to have the bars sorted first by a column, or string of IDs can be specified to have the bars in a specific order. Here the bars are ordered by the starting treatment, and follow up time.
</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="a-working-example.html#cb6-1" aria-hidden="true" tabindex="-1"></a>arm_plot <span class="ot">&lt;-</span> <span class="fu">swimmer_plot</span>(<span class="at">df=</span>ClinicalTrial.Arm,<span class="at">id=</span><span class="st">&#39;id&#39;</span>,<span class="at">end=</span><span class="st">&#39;End_trt&#39;</span>,<span class="at">name_fill=</span><span class="st">&#39;Arm&#39;</span>,</span>
<span id="cb6-2"><a href="a-working-example.html#cb6-2" aria-hidden="true" tabindex="-1"></a>                         <span class="at">id_order=</span><span class="st">&#39;Arm&#39;</span>,<span class="at">col=</span><span class="st">&quot;black&quot;</span>,<span class="at">alpha=</span><span class="fl">0.75</span>,<span class="at">width=</span>.<span class="dv">8</span>)</span>
<span id="cb6-3"><a href="a-working-example.html#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="a-working-example.html#cb6-4" aria-hidden="true" tabindex="-1"></a>arm_plot</span></code></pre></div>
<p><img src="man/figures/unnamed-chunk-4-1.png" width="672" /></p>
</div>
<div id="stratification" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Stratification<a href="a-working-example.html#stratification" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Plots can be stratified by any variables in the dataframe</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="a-working-example.html#cb7-1" aria-hidden="true" tabindex="-1"></a>swim_plot_stratify <span class="ot">&lt;-</span><span class="fu">swimmer_plot</span>(<span class="at">df=</span>ClinicalTrial.Arm,<span class="at">id=</span><span class="st">&#39;id&#39;</span>,<span class="at">end=</span><span class="st">&#39;End_trt&#39;</span>,<span class="at">name_fill=</span><span class="st">&#39;Arm&#39;</span>,</span>
<span id="cb7-2"><a href="a-working-example.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="at">col=</span><span class="st">&quot;black&quot;</span>,<span class="at">alpha=</span><span class="fl">0.75</span>,<span class="at">width=</span>.<span class="dv">8</span>,<span class="at">base_size =</span> <span class="dv">14</span>,<span class="at">stratify=</span> <span class="fu">c</span>(<span class="st">&#39;Age&#39;</span>,<span class="st">&#39;Sex&#39;</span>))</span>
<span id="cb7-3"><a href="a-working-example.html#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="a-working-example.html#cb7-4" aria-hidden="true" tabindex="-1"></a>swim_plot_stratify</span></code></pre></div>
<p><img src="man/figures/unnamed-chunk-5-1.png" width="672" /></p>
</div>
<div id="adding-points" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Adding points<a href="a-working-example.html#adding-points" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Points are added with the <code>swimmer_points()</code> function</li>
<li>The required arguments are a dataframe, an id column name, and the column name of the point’s location</li>
<li>The shape, size, fill, stroke, and transparency can all be mapped to columns</li>
<li>The argument adj.y can be used to adjust the height position of points withing a bar</li>
<li>Other aesthetics can be manipulated using <code>geom_point()</code> arguments</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="a-working-example.html#cb8-1" aria-hidden="true" tabindex="-1"></a>AE_plot <span class="ot">&lt;-</span> arm_plot <span class="sc">+</span> <span class="fu">swimmer_points</span>(<span class="at">df_points=</span></span>
<span id="cb8-2"><a href="a-working-example.html#cb8-2" aria-hidden="true" tabindex="-1"></a> ClinicalTrial.AE,<span class="at">id=</span><span class="st">&#39;id&#39;</span>,<span class="at">time=</span><span class="st">&#39;time&#39;</span>,<span class="at">name_shape =</span></span>
<span id="cb8-3"><a href="a-working-example.html#cb8-3" aria-hidden="true" tabindex="-1"></a> <span class="st">&#39;event&#39;</span>,<span class="at">size=</span><span class="fl">2.5</span>,<span class="at">fill=</span><span class="st">&#39;white&#39;</span>,<span class="at">col=</span><span class="st">&#39;black&#39;</span>)</span>
<span id="cb8-4"><a href="a-working-example.html#cb8-4" aria-hidden="true" tabindex="-1"></a>AE_plot</span></code></pre></div>
<p><img src="man/figures/unnamed-chunk-6-1.png" width="672" /></p>
<p>Multiple aesthetics can be mapped to different columns</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="a-working-example.html#cb9-1" aria-hidden="true" tabindex="-1"></a>arm_plot <span class="sc">+</span> <span class="fu">swimmer_points</span>(<span class="at">df_points=</span></span>
<span id="cb9-2"><a href="a-working-example.html#cb9-2" aria-hidden="true" tabindex="-1"></a> ClinicalTrial.AE,<span class="at">id=</span><span class="st">&#39;id&#39;</span>,<span class="at">time=</span><span class="st">&#39;time&#39;</span>,<span class="at">name_shape =</span></span>
<span id="cb9-3"><a href="a-working-example.html#cb9-3" aria-hidden="true" tabindex="-1"></a> <span class="st">&#39;event&#39;</span>,<span class="at">size=</span><span class="fl">2.5</span>,<span class="at">fill=</span><span class="st">&#39;white&#39;</span>,<span class="at">name_col =</span> <span class="st">&#39;Related&#39;</span>)</span></code></pre></div>
<p><img src="man/figures/unnamed-chunk-7-1.png" width="672" /></p>
</div>
<div id="adding-lines" class="section level2 hasAnchor" number="2.6">
<h2><span class="header-section-number">2.6</span> Adding lines<a href="a-working-example.html#adding-lines" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Lines are added with the <code>swimmer_lines()</code> function</li>
<li>The required arguments are a dataframe, an id column name, and the column names of the line’s start and end locations</li>
<li>The linetype, colour, size, and transparency can all be mapped to columns</li>
<li>The argument adj.y can be used to adjust the height position of lines withing a bar</li>
<li>Other aesthetics can be manipulated using <code>geom_segment()</code> arguments</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="a-working-example.html#cb10-1" aria-hidden="true" tabindex="-1"></a>Response_plot <span class="ot">&lt;-</span> arm_plot <span class="sc">+</span></span>
<span id="cb10-2"><a href="a-working-example.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">swimmer_lines</span>(<span class="at">df_lines=</span>ClinicalTrial.Response,<span class="at">id=</span><span class="st">&#39;id&#39;</span>,<span class="at">start =</span></span>
<span id="cb10-3"><a href="a-working-example.html#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;Response_start&#39;</span>,<span class="at">end=</span><span class="st">&#39;Response_end&#39;</span>,<span class="at">name_col=</span><span class="st">&#39;Response&#39;</span>,<span class="at">size=</span><span class="dv">1</span>)</span>
<span id="cb10-4"><a href="a-working-example.html#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="a-working-example.html#cb10-5" aria-hidden="true" tabindex="-1"></a>Response_plot</span></code></pre></div>
<p><img src="man/figures/unnamed-chunk-8-1.png" width="672" /></p>
</div>
<div id="adding-lines-and-points-together" class="section level2 hasAnchor" number="2.7">
<h2><span class="header-section-number">2.7</span> Adding lines and points together<a href="a-working-example.html#adding-lines-and-points-together" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>The function <code>swimmer_points_from_lines()</code> adds points to a plot at the start and end of each line</li>
<li>The required arguments are the same as <code>swimmer_lines()</code></li>
<li>An additional argument “cont” can be used to specify lines which do not end</li>
<li>Other aesthetics can be manipulated using <code>geom_point()</code> arguments</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="a-working-example.html#cb11-1" aria-hidden="true" tabindex="-1"></a>Response_plot_with_points <span class="ot">&lt;-</span> Response_plot<span class="sc">+</span></span>
<span id="cb11-2"><a href="a-working-example.html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">swimmer_points_from_lines</span>(<span class="at">df_lines=</span>ClinicalTrial.Response,<span class="at">id=</span><span class="st">&#39;id&#39;</span>,<span class="at">start =</span></span>
<span id="cb11-3"><a href="a-working-example.html#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;Response_start&#39;</span>,<span class="at">end =</span> <span class="st">&#39;Response_end&#39;</span>, <span class="at">cont =</span></span>
<span id="cb11-4"><a href="a-working-example.html#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;Continued_response&#39;</span>,<span class="at">name_col=</span><span class="st">&#39;Response&#39;</span>,<span class="at">size=</span><span class="dv">2</span>)</span>
<span id="cb11-5"><a href="a-working-example.html#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: `gather_()` was deprecated in tidyr</span></span>
<span id="cb11-6"><a href="a-working-example.html#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1.2.0.</span></span>
<span id="cb11-7"><a href="a-working-example.html#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ℹ Please use `gather()` instead.</span></span>
<span id="cb11-8"><a href="a-working-example.html#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ℹ The deprecated feature was likely used</span></span>
<span id="cb11-9"><a href="a-working-example.html#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   in the swimplot package.</span></span>
<span id="cb11-10"><a href="a-working-example.html#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Please report the issue to the</span></span>
<span id="cb11-11"><a href="a-working-example.html#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   authors.</span></span>
<span id="cb11-12"><a href="a-working-example.html#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; This warning is displayed once every 8</span></span>
<span id="cb11-13"><a href="a-working-example.html#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; hours.</span></span>
<span id="cb11-14"><a href="a-working-example.html#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Call</span></span>
<span id="cb11-15"><a href="a-working-example.html#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; `lifecycle::last_lifecycle_warnings()`</span></span>
<span id="cb11-16"><a href="a-working-example.html#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; to see where this warning was generated.</span></span>
<span id="cb11-17"><a href="a-working-example.html#cb11-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-18"><a href="a-working-example.html#cb11-18" aria-hidden="true" tabindex="-1"></a>Response_plot_with_points</span></code></pre></div>
<p><img src="man/figures/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="adding-arrows" class="section level2 hasAnchor" number="2.8">
<h2><span class="header-section-number">2.8</span> Adding arrows<a href="a-working-example.html#adding-arrows" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Arrows are added at the end of bars with the <code>swimmer_arrows()</code> function</li>
<li>The required arguments are a dataframe, an id column name, and the column names of the location the arrows begin</li>
<li>An additional argument “cont” can be used if only some bars will have an arrow</li>
<li>The colour can be mapped to a column</li>
<li>Features of the arrows which can be modified include the size, length and type of arrow</li>
<li>Other aesthetics can be manipulated using <code>geom_segment()</code> arguments</li>
</ul>
<p>The example below uses arrows to demonstrate patients remaining on treatment after the end of follow up</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="a-working-example.html#cb12-1" aria-hidden="true" tabindex="-1"></a>AE_plot<span class="sc">+</span></span>
<span id="cb12-2"><a href="a-working-example.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">swimmer_arrows</span>(<span class="at">df_arrows=</span>ClinicalTrial.Arm,<span class="at">id=</span><span class="st">&#39;id&#39;</span>,<span class="at">arrow_start=</span><span class="st">&#39;End_trt&#39;</span>,</span>
<span id="cb12-3"><a href="a-working-example.html#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="at">cont =</span> <span class="st">&#39;Continued_treatment&#39;</span>,<span class="at">name_col=</span><span class="st">&#39;Arm&#39;</span>,<span class="at">type =</span></span>
<span id="cb12-4"><a href="a-working-example.html#cb12-4" aria-hidden="true" tabindex="-1"></a> <span class="st">&quot;open&quot;</span>,<span class="at">cex=</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="man/figures/unnamed-chunk-10-1.png" width="672" /></p>
<p>Since none of the patients continue on “Off treatment” the arrow colours do not match the bars, this can be fixed by adding the layer <code>scale_color_discrete(drop=FALSE)</code>, the option show.legend = FALSE can also be employed as the arrow legend is not necessary</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="a-working-example.html#cb13-1" aria-hidden="true" tabindex="-1"></a>AE_plot <span class="ot">&lt;-</span> AE_plot<span class="sc">+</span></span>
<span id="cb13-2"><a href="a-working-example.html#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">swimmer_arrows</span>(<span class="at">df_arrows=</span>ClinicalTrial.Arm,<span class="at">id=</span><span class="st">&#39;id&#39;</span>,<span class="at">arrow_start=</span><span class="st">&#39;End_trt&#39;</span>,</span>
<span id="cb13-3"><a href="a-working-example.html#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="at">cont =</span> <span class="st">&#39;Continued_treatment&#39;</span>,<span class="at">name_col=</span><span class="st">&#39;Arm&#39;</span>,<span class="at">show.legend =</span> <span class="cn">FALSE</span>,<span class="at">type =</span></span>
<span id="cb13-4"><a href="a-working-example.html#cb13-4" aria-hidden="true" tabindex="-1"></a> <span class="st">&quot;open&quot;</span>,<span class="at">cex=</span><span class="dv">1</span>) <span class="sc">+</span> <span class="fu">scale_color_discrete</span>(<span class="at">drop=</span><span class="cn">FALSE</span>)</span>
<span id="cb13-5"><a href="a-working-example.html#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="a-working-example.html#cb13-6" aria-hidden="true" tabindex="-1"></a>AE_plot</span></code></pre></div>
<p><img src="man/figures/unnamed-chunk-11-1.png" width="672" /></p>
<p>Another arrow example, here the arrows are also used to demonstrate a continued treatment</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="a-working-example.html#cb14-1" aria-hidden="true" tabindex="-1"></a>Response_plot_with_points <span class="ot">&lt;-</span> Response_plot_with_points<span class="sc">+</span></span>
<span id="cb14-2"><a href="a-working-example.html#cb14-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">swimmer_arrows</span>(<span class="at">df_arrows=</span>ClinicalTrial.Response,<span class="at">id=</span><span class="st">&#39;id&#39;</span>,<span class="at">arrow_start=</span><span class="st">&#39;Response_end&#39;</span>,</span>
<span id="cb14-3"><a href="a-working-example.html#cb14-3" aria-hidden="true" tabindex="-1"></a> <span class="at">cont =</span> <span class="st">&#39;Continued_response&#39;</span>,<span class="at">name_col=</span><span class="st">&#39;Response&#39;</span>,<span class="at">show.legend =</span> <span class="cn">FALSE</span>,<span class="at">type =</span></span>
<span id="cb14-4"><a href="a-working-example.html#cb14-4" aria-hidden="true" tabindex="-1"></a> <span class="st">&quot;open&quot;</span>,<span class="at">cex=</span><span class="dv">1</span>)</span>
<span id="cb14-5"><a href="a-working-example.html#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="a-working-example.html#cb14-6" aria-hidden="true" tabindex="-1"></a>Response_plot_with_points</span></code></pre></div>
<p><img src="man/figures/unnamed-chunk-12-1.png" width="672" /></p>
</div>
<div id="making-the-plots-more-aesthetically-pleasing-with-ggplot-manipulations" class="section level2 hasAnchor" number="2.9">
<h2><span class="header-section-number">2.9</span> Making the plots more aesthetically pleasing with ggplot manipulations<a href="a-working-example.html#making-the-plots-more-aesthetically-pleasing-with-ggplot-manipulations" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="modifying-colours-and-shapes" class="section level3 hasAnchor" number="2.9.1">
<h3><span class="header-section-number">2.9.1</span> Modifying Colours and shapes<a href="a-working-example.html#modifying-colours-and-shapes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="a-working-example.html#cb15-1" aria-hidden="true" tabindex="-1"></a>AE_plot <span class="ot">&lt;-</span>  AE_plot <span class="sc">+</span></span>
<span id="cb15-2"><a href="a-working-example.html#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">name=</span><span class="st">&quot;Treatment&quot;</span>,<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;Arm A&quot;</span> <span class="ot">=</span> <span class="st">&quot;#e41a1c&quot;</span>, <span class="st">&quot;Arm B&quot;</span><span class="ot">=</span><span class="st">&quot;#377eb8&quot;</span>,<span class="st">&quot;Off Treatment&quot;</span><span class="ot">=</span><span class="st">&#39;#4daf4a&#39;</span>))<span class="sc">+</span></span>
<span id="cb15-3"><a href="a-working-example.html#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">name=</span><span class="st">&quot;Treatment&quot;</span>,<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;Arm A&quot;</span><span class="ot">=</span><span class="st">&quot;#e41a1c&quot;</span>, <span class="st">&quot;Arm B&quot;</span> <span class="ot">=</span><span class="st">&quot;#377eb8&quot;</span>,<span class="st">&quot;Off Treatment&quot;</span><span class="ot">=</span><span class="st">&#39;#4daf4a&#39;</span>)) <span class="sc">+</span></span>
<span id="cb15-4"><a href="a-working-example.html#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_shape_manual</span>(<span class="at">name=</span><span class="st">&quot;Adverse event&quot;</span>,<span class="at">values=</span><span class="fu">c</span>(<span class="at">AE=</span><span class="dv">21</span>,<span class="at">SAE=</span><span class="dv">24</span>,<span class="at">Death=</span><span class="dv">17</span>),<span class="at">breaks=</span><span class="fu">c</span>(<span class="st">&#39;AE&#39;</span>,<span class="st">&#39;SAE&#39;</span>,<span class="st">&#39;Death&#39;</span>))</span>
<span id="cb15-5"><a href="a-working-example.html#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="a-working-example.html#cb15-6" aria-hidden="true" tabindex="-1"></a>AE_plot</span></code></pre></div>
<p><img src="man/figures/col1%20-1.png" width="672" /></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="a-working-example.html#cb16-1" aria-hidden="true" tabindex="-1"></a>Response_plot_with_points <span class="ot">&lt;-</span> Response_plot_with_points <span class="sc">+</span></span>
<span id="cb16-2"><a href="a-working-example.html#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">name=</span><span class="st">&quot;Treatment&quot;</span>,<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;Arm A&quot;</span> <span class="ot">=</span><span class="st">&quot;#e41a1c&quot;</span>, <span class="st">&quot;Arm B&quot;</span><span class="ot">=</span><span class="st">&quot;#377eb8&quot;</span>,<span class="st">&quot;Off Treatment&quot;</span><span class="ot">=</span><span class="st">&#39;#4daf4a&#39;</span>))<span class="sc">+</span></span>
<span id="cb16-3"><a href="a-working-example.html#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">name=</span><span class="st">&quot;Response&quot;</span>,<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;grey20&quot;</span>,<span class="st">&quot;grey80&quot;</span>))<span class="sc">+</span></span>
<span id="cb16-4"><a href="a-working-example.html#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_shape_manual</span>(<span class="at">name=</span><span class="st">&#39;&#39;</span>,<span class="at">values=</span><span class="fu">c</span>(<span class="dv">17</span>,<span class="dv">15</span>),<span class="at">breaks=</span><span class="fu">c</span>(<span class="st">&#39;Response_start&#39;</span>,<span class="st">&#39;Response_end&#39;</span>),</span>
<span id="cb16-5"><a href="a-working-example.html#cb16-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&#39;Response start&#39;</span>,<span class="st">&#39;Response end&#39;</span>))</span>
<span id="cb16-6"><a href="a-working-example.html#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="a-working-example.html#cb16-7" aria-hidden="true" tabindex="-1"></a>Response_plot_with_points</span></code></pre></div>
<p><img src="man/figures/col2%20-1.png" width="672" /></p>
</div>
<div id="legends" class="section level3 hasAnchor" number="2.9.2">
<h3><span class="header-section-number">2.9.2</span> Legends<a href="a-working-example.html#legends" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes there will be points within the fill of the legend, this can be turned off with the layer <code>guides()</code></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="a-working-example.html#cb17-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-2"><a href="a-working-example.html#cb17-2" aria-hidden="true" tabindex="-1"></a>Response_plot_with_points <span class="ot">&lt;-</span> Response_plot_with_points<span class="sc">+</span><span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">shape =</span> <span class="cn">NA</span>)))</span>
<span id="cb17-3"><a href="a-working-example.html#cb17-3" aria-hidden="true" tabindex="-1"></a>Response_plot_with_points</span></code></pre></div>
<p><img src="man/figures/legend2%20-1.png" width="672" /></p>
</div>
<div id="add-arrows-to-the-legend" class="section level3 hasAnchor" number="2.9.3">
<h3><span class="header-section-number">2.9.3</span> Add arrows to the legend<a href="a-working-example.html#add-arrows-to-the-legend" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A work around to add arrows to the legend is using the symbol for an arrow within <code>annotate()</code></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="a-working-example.html#cb18-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-2"><a href="a-working-example.html#cb18-2" aria-hidden="true" tabindex="-1"></a>Response_plot_with_points <span class="ot">&lt;-</span> Response_plot_with_points<span class="sc">+</span></span>
<span id="cb18-3"><a href="a-working-example.html#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">x=</span><span class="fl">3.5</span>, <span class="at">y=</span><span class="fl">20.45</span>, <span class="at">label=</span><span class="st">&quot;Continued response&quot;</span>,<span class="at">size=</span><span class="fl">3.25</span>)<span class="sc">+</span></span>
<span id="cb18-4"><a href="a-working-example.html#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>,<span class="at">x=</span><span class="fl">2.5</span>, <span class="at">y=</span><span class="fl">20.25</span>, <span class="at">label=</span><span class="fu">sprintf</span>(<span class="st">&#39;\u2192&#39;</span>),<span class="at">size=</span><span class="fl">8.25</span>)<span class="sc">+</span></span>
<span id="cb18-5"><a href="a-working-example.html#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>(<span class="at">clip =</span> <span class="st">&#39;off&#39;</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">17</span>))</span>
<span id="cb18-6"><a href="a-working-example.html#cb18-6" aria-hidden="true" tabindex="-1"></a>Response_plot_with_points</span></code></pre></div>
<p><img src="man/figures/legend3%20-1.png" width="672" /></p>
</div>
<div id="axis" class="section level3 hasAnchor" number="2.9.4">
<h3><span class="header-section-number">2.9.4</span> axis<a href="a-working-example.html#axis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The swimmer plot is a bar plot that has been turned on its side, so to modify the x axis it is actually required to change the y axis. This is also the case for adding axis labels</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="a-working-example.html#cb19-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-2"><a href="a-working-example.html#cb19-2" aria-hidden="true" tabindex="-1"></a>Response_plot_with_points <span class="sc">+</span>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Time since enrollment (months)&quot;</span>,<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">18</span>,<span class="at">by=</span><span class="dv">3</span>))</span></code></pre></div>
<p><img src="man/figures/axis2%20-1.png" width="672" /></p>
</div>
<div id="formatting-the-legend-when-an-aesthetic-is-mapped-in-multiple-layers" class="section level3 hasAnchor" number="2.9.5">
<h3><span class="header-section-number">2.9.5</span> Formatting the legend when an aesthetic is mapped in multiple layers<a href="a-working-example.html#formatting-the-legend-when-an-aesthetic-is-mapped-in-multiple-layers" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes multiple layers of the swimmers plot will include the same aesthetic the plot below uses “fill” with both the points and with the bars. Using guides, and override.aes the legends can be manipulated to divide the layers in the legend</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="a-working-example.html#cb20-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-2"><a href="a-working-example.html#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Overriding legends to have colours for the events and no points in the lines</span></span>
<span id="cb20-3"><a href="a-working-example.html#cb20-3" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> arm_plot <span class="sc">+</span> <span class="fu">swimmer_points</span>(<span class="at">df_points=</span>ClinicalTrial.AE,<span class="at">id=</span><span class="st">&#39;id&#39;</span>,<span class="at">time=</span><span class="st">&#39;time&#39;</span>,<span class="at">name_shape =</span></span>
<span id="cb20-4"><a href="a-working-example.html#cb20-4" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&#39;event&#39;</span>,<span class="at">size=</span><span class="fl">2.5</span>,<span class="at">col=</span><span class="st">&#39;black&#39;</span>,<span class="at">name_fill =</span> <span class="st">&#39;event&#39;</span>) <span class="sc">+</span></span>
<span id="cb20-5"><a href="a-working-example.html#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_shape_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="dv">21</span>,<span class="dv">22</span>,<span class="dv">23</span>),<span class="at">breaks=</span><span class="fu">c</span>(<span class="st">&#39;AE&#39;</span>,<span class="st">&#39;SAE&#39;</span>,<span class="st">&#39;Death&#39;</span>))</span>
<span id="cb20-6"><a href="a-working-example.html#cb20-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-7"><a href="a-working-example.html#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="a-working-example.html#cb20-8" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span><span class="fu">scale_fill_manual</span>(<span class="at">name=</span><span class="st">&quot;Treatment&quot;</span>,<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;AE&quot;</span><span class="ot">=</span><span class="st">&#39;grey90&#39;</span>,<span class="st">&quot;SAE&quot;</span> <span class="ot">=</span><span class="st">&quot;grey40&quot;</span>,<span class="st">&quot;Death&quot;</span> <span class="ot">=</span><span class="dv">1</span>,<span class="st">&quot;Arm A&quot;</span><span class="ot">=</span><span class="st">&quot;#e41a1c&quot;</span>, <span class="st">&quot;Arm B&quot;</span> <span class="ot">=</span><span class="st">&quot;#377eb8&quot;</span>,<span class="st">&quot;Off Treatment&quot;</span><span class="ot">=</span><span class="st">&quot;#4daf4a&quot;</span>))</span></code></pre></div>
<p><img src="man/figures/Legend%20with%20multiple%20-1.png" width="672" /></p>
<p>This plot legend is difficult to follow</p>
<p>However, by removing the AE fills from the legend, and adding them to the points it is much easier to follow the plot</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="a-working-example.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#First step is to correct the fill legend </span></span>
<span id="cb21-2"><a href="a-working-example.html#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="a-working-example.html#cb21-3" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> p1 <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">name=</span><span class="st">&quot;Treatment&quot;</span>,<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;AE&quot;</span><span class="ot">=</span><span class="st">&#39;grey90&#39;</span>,<span class="st">&quot;SAE&quot;</span> <span class="ot">=</span><span class="st">&quot;grey40&quot;</span>,<span class="st">&quot;Death&quot;</span> <span class="ot">=</span><span class="dv">1</span>,<span class="st">&quot;Arm A&quot;</span><span class="ot">=</span><span class="st">&quot;#e41a1c&quot;</span>, <span class="st">&quot;Arm B&quot;</span> <span class="ot">=</span><span class="st">&quot;#377eb8&quot;</span>,<span class="st">&quot;Off Treatment&quot;</span><span class="ot">=</span><span class="st">&quot;#4daf4a&quot;</span>),<span class="at">breaks =</span> <span class="fu">c</span>(<span class="st">&quot;Arm A&quot;</span>,<span class="st">&quot;Arm B&quot;</span>,<span class="st">&quot;Off Treatment&quot;</span>))</span>
<span id="cb21-4"><a href="a-working-example.html#cb21-4" aria-hidden="true" tabindex="-1"></a>p2</span></code></pre></div>
<p><img src="man/figures/Legend%20with%20multiple2%20-1.png" width="672" /></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="a-working-example.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="do">##Then use guides to add the colours to the </span></span>
<span id="cb22-2"><a href="a-working-example.html#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="a-working-example.html#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Setting the colours of the filled points to match the AE type </span></span>
<span id="cb22-4"><a href="a-working-example.html#cb22-4" aria-hidden="true" tabindex="-1"></a>p2 <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">shape =</span> <span class="fu">guide_legend</span>(<span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">fill=</span><span class="fu">c</span>(<span class="st">&#39;grey90&#39;</span>,<span class="st">&#39;grey40&#39;</span>,<span class="dv">1</span>))),<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">shape =</span> <span class="cn">NA</span>))) </span></code></pre></div>
<p><img src="man/figures/Legend%20with%20multiple2%20-2.png" width="672" /></p>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="more-complex-data-structures.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "none",
"toc_depth": 3,
"scroll_highlight": true
},
"info": false
});
});
</script>

</body>

</html>
